function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a.register("kyEFX",(function(t,n){var r,a;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},a=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("kyEFX").register(JSON.parse('{"dyE3l":"index-library.25227945.js","fa4Yp":"question-mark.34d36c19.jpeg","5UbS1":"index.b28ecfd1.css","ggbzi":"index.1bfffe20.js"}'));document.querySelector(".button__watched"),document.querySelector(".button__queue");const o=document.querySelector(".empty-queue-container"),s=document.querySelector(".empty-watched-container"),c=document.querySelector(".gallery-library-list");let l=null,d=null;try{d=localStorage.getItem("queue"),d=null===d?[]:JSON.parse(d)}catch(e){console.error("Get state error: ",e.message)}try{l=localStorage.getItem("watched"),l=null===l?[]:JSON.parse(l)}catch(e){console.error("Get state error: ",e.message)}
//! First render QUEUE
d.length>0&&(o.classList.add("is-hidden"),c.innerHTML=m(d));const i={btnWatched:document.querySelector(".button__watched"),btnQueue:document.querySelector(".button__queue")};i.btnQueue.addEventListener("click",(e=>{if(!i.btnQueue.classList.contains("button__current")){e.target.classList.add("button__current"),i.btnWatched.classList.remove("button__current");try{d=localStorage.getItem("queue"),d=null===d?[]:JSON.parse(d)}catch(e){console.error("Get state error: ",e.message)}s.classList.add("is-hidden"),0!==d.length?(o.classList.add("is-hidden"),c.innerHTML=m(d)):o.classList.remove("is-hidden")}})),i.btnWatched.addEventListener("click",(e=>{if(!i.btnWatched.classList.contains("button__current")){e.target.classList.add("button__current"),i.btnQueue.classList.remove("button__current");try{l=localStorage.getItem("watched"),l=null===l?[]:JSON.parse(l)}catch(e){console.error("Get state error: ",e.message)}o.classList.add("is-hidden"),console.log("hi"),c.innerHTML="",0!==l.length?(console.log("ho"),s.classList.add("is-hidden"),c.innerHTML=m(l)):s.classList.remove("is-hidden")}}));var u;function m(e){return e.map((e=>{return`<li class="gallery__item" >\n      <img class="gallery__img" src="${null===e.poster_path?new URL(u):`https://image.tmdb.org/t/p/w500${e.poster_path}`}" alt="movie image" name="${e.id}">\n      <h3 class="gallery__title">${e.title||"Unknown"}</h3>\n       <p class="gallery__text"><span class="wrap-info">${t=e.genres,t.map((e=>e.name||"Unknown")).join(", ")} &#124 ${e.release_date.slice(0,4)||"Unknown"}</span> <span class="info-accent">${e.vote_average||"Unknown"}</span></p></li>`;var t})).join("")}u=new URL(a("kyEFX").resolve("fa4Yp"),import.meta.url).toString(),a("epHO8");var g=a("fvCRb"),h=a("kyRuT"),_=a("glfCx");const p=new(0,g.default),v=document.querySelector(".gallery-library-list"),b=document.querySelector(".backdrop"),f=document.querySelector(".modal__contents"),y=document.querySelector(".modal__btn-close"),L=document.querySelector(".button__queue");function w(e){e.target===b&&(b.classList.toggle("is-hidden"),document.removeEventListener("click",w),document.removeEventListener("keydown",S))}function S(e){if("Escape"===e.code){if(b.classList.toggle("is-hidden"),document.removeEventListener("keydown",S),L.classList.contains("button__current")){try{savedQueue=localStorage.getItem("queue"),savedQueue=null===savedQueue?[]:JSON.parse(savedQueue)}catch(e){console.error("Get state error: ",e.message)}return void(v.innerHTML=m(savedQueue))}try{savedWatched=localStorage.getItem("watched"),savedWatched=null===savedWatched?[]:JSON.parse(savedWatched)}catch(e){console.error("Get state error: ",e.message)}v.innerHTML=m(savedWatched)}}function k(e){if(b.classList.toggle("is-hidden"),L.classList.contains("button__current")){try{savedQueue=localStorage.getItem("queue"),savedQueue=null===savedQueue?[]:JSON.parse(savedQueue)}catch(e){console.error("Get state error: ",e.message)}v.innerHTML=m(savedQueue)}else{try{savedWatched=localStorage.getItem("watched"),savedWatched=null===savedWatched?[]:JSON.parse(savedWatched)}catch(e){console.error("Get state error: ",e.message)}v.innerHTML=m(savedWatched)}}v.addEventListener("click",(async function(e){if("IMG"!==e.target.nodeName)return;const t=(0,h.getSpinner)(),n=e.target.name;try{b.append(t);const e=await p.fetchFilmInfo(n);b.classList.toggle("is-hidden");try{await async function(e){try{const{genres:t}=await p.fetchGeneres(),n=(t.reduce(((e,{name:t,id:n})=>({...e,[n]:t})),{}),`<img src="${null===e.poster_path?new URL(u):`https://image.tmdb.org/t/p/w500${e.poster_path}`}" alt="photo" class="modal__poster" />\n        <div>\n          <h2 class="modal__title">${e.title.toUpperCase()||"Unknown"}</h2>\n          <table class="modal__info">\n            <tr>\n              <th>Vote/Votes</th>\n              <td>\n                <span class="modal__info--accent">${e.vote_average||"Unknown"}</span> /\n                <span class="modal__info--noaccent">${e.vote_count||"Unknown"}</span>\n              </td>\n            </tr>\n            <tr>\n              <th>Popularity</th>\n              <td>${e.popularity||"Unknown"}</td>\n            </tr>\n            <tr>\n              <th>Original Title</th>\n              <td>${e.original_title||"Unknown"}</td>\n            </tr>\n            <tr>\n              <th>Genre</th>\n              <td>${e.genres.map((e=>e.name)).join(", ")||"Unknown"}</td>\n            </tr>\n          </table>\n          <h3 class="modal__about--title">About</h3>\n          <p class="modal__about">\n            ${e.overview||"Unknown"}\n          </p>\n              <div class="modal__btn">\n      <button type="button" class="modal__btn-watched">add to Watched</button>\n      <button type="button" class="modal__btn-queue">add to queue</button>\n    </div>\n </div>`);f.innerHTML=n}catch(e){console.log(e.message)}}(e),(0,_.onModalBtnClick)(e)}catch(e){console.log(e.message)}}catch(e){console.log(e.message)}finally{t.remove()}document.addEventListener("keydown",S),y.addEventListener("click",k),document.addEventListener("click",w)})),y.removeEventListener("click",k),document.removeEventListener("keydown",S),document.removeEventListener("click",w),a("2nhTy");
//# sourceMappingURL=index-library.25227945.js.map
