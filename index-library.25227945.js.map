{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-77072d1401abcd53.js","src/js/header-library.js","src/js/gallery-library.js","node_modules/@parcel/runtime-js/lib/runtime-40519ad1a616e343.js","src/js/modal-library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"dyE3l\\\":\\\"index-library.25227945.js\\\",\\\"fa4Yp\\\":\\\"question-mark.34d36c19.jpeg\\\",\\\"5UbS1\\\":\\\"index.b28ecfd1.css\\\",\\\"ggbzi\\\":\\\"index.1bfffe20.js\\\"}\"));","\nconst buttonWatched = document.querySelector('.button__watched');\nconst buttonQueue = document.querySelector('.button__queue');\n\n","// variables\n\nconst emptyQueueDiv = document.querySelector('.empty-queue-container');\nconst emptyWatchedDiv = document.querySelector('.empty-watched-container');\nconst galleryLibrary = document.querySelector('.gallery-library-list');\nlet savedWatched = null;\nlet savedQueue = null;\n\ntry {\n  savedQueue = localStorage.getItem('queue');\n  savedQueue = savedQueue === null ? [] : JSON.parse(savedQueue);\n} catch (error) {\n  console.error('Get state error: ', error.message);\n}\n\ntry {\n  savedWatched = localStorage.getItem('watched');\n  savedWatched = savedWatched === null ? [] : JSON.parse(savedWatched);\n} catch (error) {\n  console.error('Get state error: ', error.message);\n}\n\n//! First render QUEUE\n\nif (savedQueue.length > 0) {\n  emptyQueueDiv.classList.add('is-hidden');\n  galleryLibrary.innerHTML = makeMarkup(savedQueue);\n}\n\n// refs\nconst refs = {\n  btnWatched: document.querySelector('.button__watched'),\n  btnQueue: document.querySelector('.button__queue'),\n};\n\nconst onBtnWatchedClickIsActive = e => {\n  if (refs.btnWatched.classList.contains('button__current')) {\n    return;\n  }\n\n  e.target.classList.add('button__current');\n  refs.btnQueue.classList.remove('button__current');\n\n  try {\n    savedWatched = localStorage.getItem('watched');\n    savedWatched = savedWatched === null ? [] : JSON.parse(savedWatched);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n  emptyQueueDiv.classList.add('is-hidden');\n  console.log('hi');\n  galleryLibrary.innerHTML = '';\n  if (savedWatched.length === 0) {\n    emptyWatchedDiv.classList.remove('is-hidden');\n    return;\n  }\n  console.log('ho');\n  emptyWatchedDiv.classList.add('is-hidden');\n\n  galleryLibrary.innerHTML = makeMarkup(savedWatched);\n};\n\nconst onBtnQueueClickIsActive = e => {\n  if (refs.btnQueue.classList.contains('button__current')) {\n    return;\n  }\n\n  e.target.classList.add('button__current');\n  refs.btnWatched.classList.remove('button__current');\n\n  try {\n    savedQueue = localStorage.getItem('queue');\n    savedQueue = savedQueue === null ? [] : JSON.parse(savedQueue);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n  emptyWatchedDiv.classList.add('is-hidden');\n  if (savedQueue.length === 0) {\n    emptyQueueDiv.classList.remove('is-hidden');\n    return;\n  }\n\n  emptyQueueDiv.classList.add('is-hidden');\n  galleryLibrary.innerHTML = makeMarkup(savedQueue);\n};\n\nrefs.btnQueue.addEventListener('click', onBtnQueueClickIsActive);\nrefs.btnWatched.addEventListener('click', onBtnWatchedClickIsActive);\n\nexport function makeMarkup(data) {\n  // console.log(data);\n  let markup = data\n    .map(\n      data => `<li class=\"gallery__item\" >\n      <img class=\"gallery__img\" src=\"${\n        data.poster_path === null\n          ? new URL('../images/gallery/question-mark.jpeg', import.meta.url)\n          : `https://image.tmdb.org/t/p/w500${data.poster_path}`\n      }\" alt=\"movie image\" name=\"${data.id}\">\n      <h3 class=\"gallery__title\">${data.title || 'Unknown'}</h3>\n       <p class=\"gallery__text\"><span class=\"wrap-info\">${mapGanereId(\n         data.genres\n       )} &#124 ${\n        data.release_date.slice(0, 4) || 'Unknown'\n      }</span> <span class=\"info-accent\">${\n        data.vote_average || 'Unknown'\n      }</span></p></li>`\n    )\n    .join('');\n  return markup;\n}\n\n// !------------------------------\nfunction mapGanereId(genres) {\n  return genres\n    .map(genere => {\n      return genere.name || 'Unknown';\n    })\n    .join(', ');\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fa4Yp\")).toString();","import UnsplashAPI from './fetch-films';\nconst unsplashAPI = new UnsplashAPI();\nimport { getSpinner } from './spiner';\n\nimport { makeMarkup } from './gallery-library';\n\nimport { onModalBtnClick } from './library-locale-storage';\nconst gallery = document.querySelector('.gallery-library-list');\nconst modalBackdrop = document.querySelector('.backdrop');\nconst modalWrap = document.querySelector('.modal__contents');\nconst closeBtn = document.querySelector('.modal__btn-close');\nconst btnQueue = document.querySelector('.button__queue');\n\n// ?_________________OPEN MODAL_______________\n\nasync function openModal(e) {\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n  const spinner = getSpinner();\n\n  const filmId = e.target.name;\n  //   console.log(filmId);\n  try {\n    modalBackdrop.append(spinner);\n\n    const result = await unsplashAPI.fetchFilmInfo(filmId);\n    modalBackdrop.classList.toggle('is-hidden');\n    // console.log(result);\n\n    try {\n      await renderModal(result);\n      onModalBtnClick(result);\n    } catch (error) {\n      console.log(error.message);\n    }\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    spinner.remove();\n  }\n  document.addEventListener('keydown', closeModalEsc);\n  closeBtn.addEventListener('click', closeModalOnBtnClick);\n  document.addEventListener('click', closeModal);\n}\n\ngallery.addEventListener('click', openModal);\ncloseBtn.removeEventListener('click', closeModalOnBtnClick);\ndocument.removeEventListener('keydown', closeModalEsc);\ndocument.removeEventListener('click', closeModal);\n// ?_____________CLOSE MODAL______________\n\nfunction closeModal(e) {\n  if (e.target === modalBackdrop) {\n    modalBackdrop.classList.toggle('is-hidden');\n    document.removeEventListener('click', closeModal);\n    document.removeEventListener('keydown', closeModalEsc);\n  }\n}\n\nfunction closeModalEsc(e) {\n  if (e.code === 'Escape') {\n    modalBackdrop.classList.toggle('is-hidden');\n    document.removeEventListener('keydown', closeModalEsc);\n\n    if (btnQueue.classList.contains('button__current')) {\n      try {\n        savedQueue = localStorage.getItem('queue');\n        savedQueue = savedQueue === null ? [] : JSON.parse(savedQueue);\n      } catch (error) {\n        console.error('Get state error: ', error.message);\n      }\n      gallery.innerHTML = makeMarkup(savedQueue);\n      return;\n    }\n    try {\n      savedWatched = localStorage.getItem('watched');\n      savedWatched = savedWatched === null ? [] : JSON.parse(savedWatched);\n    } catch (error) {\n      console.error('Get state error: ', error.message);\n    }\n    gallery.innerHTML = makeMarkup(savedWatched);\n  }\n}\n\nfunction closeModalOnBtnClick(e) {\n  modalBackdrop.classList.toggle('is-hidden');\n\n  if (btnQueue.classList.contains('button__current')) {\n    try {\n      savedQueue = localStorage.getItem('queue');\n      savedQueue = savedQueue === null ? [] : JSON.parse(savedQueue);\n    } catch (error) {\n      console.error('Get state error: ', error.message);\n    }\n    gallery.innerHTML = makeMarkup(savedQueue);\n    return;\n  }\n  try {\n    savedWatched = localStorage.getItem('watched');\n    savedWatched = savedWatched === null ? [] : JSON.parse(savedWatched);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n  gallery.innerHTML = makeMarkup(savedWatched);\n}\n\n// ?___________________Modal RENDER\n\nasync function renderModal(film) {\n  try {\n    const { genres } = await unsplashAPI.fetchGeneres();\n    // console.log(genres);\n    const generesConfig = getGeneresConfig(genres);\n    // console.log(generesConfig);\n\n    const markup = `<img src=\"${\n      film.poster_path === null\n        ? new URL('../images/gallery/question-mark.jpeg', import.meta.url)\n        : `https://image.tmdb.org/t/p/w500${film.poster_path}`\n    }\" alt=\"photo\" class=\"modal__poster\" />\n        <div>\n          <h2 class=\"modal__title\">${film.title.toUpperCase() || 'Unknown'}</h2>\n          <table class=\"modal__info\">\n            <tr>\n              <th>Vote/Votes</th>\n              <td>\n                <span class=\"modal__info--accent\">${\n                  film.vote_average || 'Unknown'\n                }</span> /\n                <span class=\"modal__info--noaccent\">${\n                  film.vote_count || 'Unknown'\n                }</span>\n              </td>\n            </tr>\n            <tr>\n              <th>Popularity</th>\n              <td>${film.popularity || 'Unknown'}</td>\n            </tr>\n            <tr>\n              <th>Original Title</th>\n              <td>${film.original_title || 'Unknown'}</td>\n            </tr>\n            <tr>\n              <th>Genre</th>\n              <td>${\n                film.genres\n                  .map(genere => {\n                    return genere.name;\n                  })\n                  .join(', ') || 'Unknown'\n              }</td>\n            </tr>\n          </table>\n          <h3 class=\"modal__about--title\">About</h3>\n          <p class=\"modal__about\">\n            ${film.overview || 'Unknown'}\n          </p>\n              <div class=\"modal__btn\">\n      <button type=\"button\" class=\"modal__btn-watched\">add to Watched</button>\n      <button type=\"button\" class=\"modal__btn-queue\">add to queue</button>\n    </div>\n </div>`;\n\n    modalWrap.innerHTML = markup;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction mapGanereId(filmGeneresId, generesConfig) {\n  //   console.log(filmGeneresId);\n  //   console.log(generesConfig);\n  return filmGeneresId\n    .map(generes => {\n      return generesConfig[generes] || 'Unknown';\n    })\n    .join(', ');\n}\n\n// ?-------------------Make Obj with id: name------------\n\nfunction getGeneresConfig(allGeneres) {\n  return allGeneres.reduce((previousValue, { name, id }) => {\n    return { ...previousValue, [id]: name };\n  }, {});\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","document","querySelector","$14816da351873931$var$emptyQueueDiv","$14816da351873931$var$emptyWatchedDiv","$14816da351873931$var$galleryLibrary","$14816da351873931$var$savedWatched","$14816da351873931$var$savedQueue","localStorage","getItem","error","console","message","error1","classList","add","innerHTML","$14816da351873931$export$59302306c6f78677","$14816da351873931$var$refs","btnWatched","btnQueue","addEventListener","e","contains","target","remove","error3","error2","log","data1","map","data","poster_path","URL","$5c6dc89f2bd1f5c5$exports","title","genres","genere","name","join","release_date","slice","vote_average","resolve","import","meta","url","toString","$fvCRb","$2631b5b1e00936b8$var$unsplashAPI","default","$2631b5b1e00936b8$var$gallery","$2631b5b1e00936b8$var$modalBackdrop","$2631b5b1e00936b8$var$modalWrap","$2631b5b1e00936b8$var$closeBtn","$2631b5b1e00936b8$var$btnQueue","$2631b5b1e00936b8$var$closeModal","toggle","removeEventListener","$2631b5b1e00936b8$var$closeModalEsc","code","savedQueue","savedWatched","$2631b5b1e00936b8$var$closeModalOnBtnClick","async","nodeName","spinner","$kyRuT","getSpinner","filmId","append","result","fetchFilmInfo","film","fetchGeneres","markup","reduce","previousValue","toUpperCase","vote_count","popularity","original_title","overview","$2631b5b1e00936b8$var$renderModal","$glfCx","onModalBtnClick"],"version":3,"file":"index-library.25227945.js.map"}